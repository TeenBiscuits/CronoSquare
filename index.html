<!--
SPDX-FileCopyrightText: 2024 Pablo Portas L√≥pez <81629707+TeenBiscuits@users.noreply.github.com>

SPDX-License-Identifier: Apache-2.0
-->

<!DOCTYPE html>
<html lang="es"> <!-- Web escrita en espa√±ol-->


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CronoSquare | HackUDC 2024</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="imagenes/favicon.ico">
</head>


<body>
    <audio id="musifondo" loop>
        <!-- M√∫sica en bucle de fondo libre de derechos de autor -->
        <source src="musica/Fondo.mp3" type="audio/mpeg">
    </audio>
    <audio id="sonidoClick" src="musica/Clicks.mp3" preload="auto">
        <!-- M√∫sica del Minecraft para cada vez que el usuario clica en un tile -->
    </audio>
    <div class="fondo-animado"> <!-- El fondo va cambiado de color seg√∫n lo especificado en el .css -->
        
        <h1 style="text-align: center;">Crono <img style="height: 75px;" src="./imagenes/Logo_ICON_sin-fondo.png"
                alt=""> Square</h1>
        <h3 style="text-align: center;">HackUDC 2024</h3>

        <div class="contenedor"> <!-- Div Principal -->
            <div class="texto"> <!-- Contadores y Temporizador -->
                <img style="width: 60px;" src="imagenes/ChinchetaVerde.png" alt=""><br>
                <div id="cuentaAtras">10:00:00</div>
                <br>
                <div id="score-display">Puntuaci√≥n: 0</div>
                <div id="move-display">Movimientos: 0</div>

                <div class="contenedor-botones">
                    <a target="_blank" href="https://github.com/TeenBiscuits/CronoSquare" class="boton avanzar">‚≠ê Enlace
                        al Github</a>
                </div>
            </div>
            <div class="puzzle" id="game-grid"> <!-- Game Grid utilizada por el programa para el tablero de juego -->
            </div>
            <script src="script.js"></script>

            <div class="botones"> <!-- Opciones de dificultad del Juego -->
                Imagen
                <label class="switch">
                    <input type="checkbox" id="show-image" onclick="toggleImage()">
                    <span class="slider"></span>
                </label>
                <div id="imagenContenedor" style="display:none;">
                    <img style="width: 50px;" id="imagen" src="imagenes/patron.png" alt="">
                </div>
                <br><br>
                <div>
                    <img id="imagenDeLaEsquina" src="" alt="Cargando..." height="256" width="auto">
                    <script src="script.js"></script>
                </div>
                <br>
                N√∫meros <label class="switch">
                    <input type="checkbox" id="show-numbers">
                    <span class="slider"></span>
                </label>
                <br>
            </div>
        </div>
        <div class="contenedor-centrado"> <!-- Bot√≥n para Generar una nueva imagen -->
            <div class="contenedor-botones">
                <button id="random-button" class="boton avanzar">‚Üí üé≤‚ú® Crear con IA ‚ú®üé≤ ‚Üê</button>
            </div>
        </div>
        <div> <!-- Cr√©ditos <3 -->
            <br>
            <p style="text-align: center;">Creado por Pablo Portas L√≥pez, √Ångel D√≠az Fern√°ndez y Alexandre Laredo
                Fern√°ndez.</p>
        </div>
    </div>

    <script>
        // JavaScript para ocultar la imagen original seg√∫n el bot√≥n
        function toggleImage() {
            var isChecked = document.getElementById("show-image").checked; // Booleano para el bot√≥n de mostrar imagen (activado)
            var image = document.getElementById("imagenDeLaEsquina");

            // localStorage.getItem('imagenDeLaEsquina'.style.display);

            if (image.style.display === "none" && isChecked) {
                image.style.display = "block";
            } else if (image.style.display === "block" && !isChecked) {
                image.style.display = "none";
            }

            // Update the toggle state in localStorage
            // localStorage.setItem('imageToggleState', image.style.display === "none" ? "false" : "true");
            localStorage.setItem("show-image", isChecked);
        }

        // Obtiene el estado del switch del localStorage para mostrar u ocultar la imagen de ayuda (o "imagenDeLaEsquina")
        // No es necesario el setItem para guardar el dato
        
        document.addEventListener('DOMContentLoaded', function() {
            var isChecked;

            // Check if localStorage is available
            if (typeof(Storage) !== "undefined") {
                // Retrieve data from localStorage if available
                isChecked = localStorage.getItem('show-image');
            }

            var image = document.getElementById("imagenDeLaEsquina");
            var toggle = document.getElementById("show-image");

            // Set the default toggle state if localStorage is empty
            if (isChecked === null) {
                isChecked = false; // Set default value to false
            }
            
            if (isChecked === 'false') {
                image.style.display = 'none';
                localStorage.setItem("show-image", isChecked);
                toggle.checked = false;
            } else if (isChecked === 'true') {
                image.style.display = 'block';
                localStorage.setItem("show-image", isChecked);
                toggle.checked = true;
            } else {
                image.style.display = 'none';
                localStorage.setItem("show-image", isChecked);
                toggle.checked = false;
            }

            // Add event listener for checkbox change event
            toggle.addEventListener("change", toggleImage);
        });
    </script>

</body>
<script>
    // TODO: Solucional el ERROR.
    document.getElementById('botonClickeable').addEventListener('click', function () {
        var sonido = document.getElementById('sonidoClick');
        sonido.play();
    });
</script>

</html>